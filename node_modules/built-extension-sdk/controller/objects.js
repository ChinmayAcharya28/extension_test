module.exports = {
	GET:{
		_pre: function(req, res){
			req.bobjekt = req.bclass.Query(req.payload.object)
			return utils.Promise.resolve()
		},
		_pre_send: function (req, res) {
			return this.resSuccess(req, res, req.bobjekt.data)
		},
		_post: function(req, res){
			req.bobjekt = req.payload.object
			return utils.Promise.resolve()
		},
		_post_send: function (req, res) {
			return this.resSuccess(req, res, req.bobjekt)
		}
	},
	POST:{
		_pre: function(req, res){
			req.bobjekt = genericObjectPre(req, req.payload.object)
			return utils.Promise.resolve()
		},
		_pre_send: function (req, res) {
			return this.resSuccess(req, res, req.bobjekt.delta)
		},
		_post: function(req, res){
			req.bobjekt = req.payload.object
			return utils.Promise.resolve()
		},
		_post_send: function (req, res) {
			return this.resSuccess(req, res, req.bobjekt)
		}
	},
	DELETE:{
		_pre: function(req, res){
			req.bobjekt = req.bclass.Query(req.payload.object)
			return utils.Promise.resolve()
		},
		_pre_send: function (req, res) {
			return this.resSuccess(req, res, req.bobjekt.data)
		},
		_post: function(req, res){
			req.bobjekt = req.payload.object
			return utils.Promise.resolve()
		},
		_post_send: function (req, res) {
			return this.resSuccess(req, res, null)
		}
	},
	"/:objectUid":{
		GET:{
			_pre: function(req, res){
				var objectUid = req.params.objectUid
				req.bobjekt   = genericObjectPre(req, objectUid)
				return utils.Promise.resolve()
			},
			_pre_send: function (req, res) {
				return this.resSuccess(req, res, null)
			},
			_post: function(req, res){
				req.bobjekt = req.payload.object
				return utils.Promise.resolve()
			},
			_post_send: function(req, res) {
				return this.resSuccess(req, res, req.bobjekt)
			}
		},
		PUT:{
			_pre: function(req, res){
				var objectUid = req.params.objectUid
				req.bobjekt   = genericObjectPre(req, objectUid).assign(req.payload.object)
				return utils.Promise.resolve()
			},
			_pre_send: function (req, res) {
				return this.resSuccess(req, res, req.bobjekt.delta)
			},
			_post: function(req, res){
				req.bobjekt = req.payload.object
				return utils.Promise.resolve()
			},
			_post_send: function (req, res) {
				return this.resSuccess(req, res, req.bobjekt)
			}
		},
		DELETE:{
			_pre: function(req, res){
				var objectUid = req.params.objectUid
				req.bobjekt   = genericObjectPre(req, objectUid)
				return utils.Promise.resolve()
			},
			_pre_send: function (req, res) {
				return this.resSuccess(req, res, null)
			},
			_post: function(req, res){
				req.bobjekt = req.payload.object
				return utils.Promise.resolve()
			},
			_post_send: function(req, res){
				return this.resSuccess(req, res, null)
			}
		}
	}
}

function genericObjectPre(req, data){
	return req.bclass.Object(data)
}